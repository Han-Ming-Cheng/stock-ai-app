# 📈 Stock AI App
## 美股 AI 財報 × 技術分析工具（Google Gemini）

🔗 **線上使用**  
https://stock-ai-app-c6evappbapgfta6oozgqfx.streamlit.app/

---

## 🚀 專案簡介

這是一個使用 **Streamlit + Google Gemini** 打造的美股分析工具。  
只要輸入股票代號（例如 `AAPL`、`TSLA`、`NVDA`），系統就會自動整合：

- 📊 股價、技術指標與動能分析  
- 📈 專業互動式 K 線圖（含畫線工具）  
- 🤖 Gemini AI 產生的結構化分析報告  
- 📊 財報重點、潛在風險與未來展望  
- 📄 新聞 / 財報逐字稿的 AI 翻譯與摘要  

⚠️ **本工具僅供學習與研究使用，所有內容皆非投資建議。**

---

## 🔧 功能總覽

### 1️⃣ 股價與即時概況

- 最近一小時（或最近收盤）價格變化  
- 漲跌幅（%）與方向標示  
- 最近一個交易日：
  - MA5 / MA10 / MA20  
  - 成交量  

---

### 2️⃣ 專業圖表（Pro Chart）

- 圖表切換：
  - K 線圖
  - 收盤價折線圖
- 技術線：
  - MA5 / MA10 / MA20
- ✍️ 畫線工具：
  - 手繪趨勢線（黑 / 紅 / 藍 / 綠）
  - Undo / Redo / Clear（多步還原）
- 技術指標：
  - RSI(14)
  - 成交量長條圖

---

### 3️⃣ 指標摘要卡片

**估值指標**
- 現價  
- Trailing PE  
- Forward PE  
- P/B Ratio  

**動能指標**
- 1M / 3M 報酬率  
- 3M 波動度  
- 3M 高點 / 低點  

---

### 4️⃣ 🤖 AI 數據分析（Google Gemini）

使用方式：

- 查看系統預設分析（依目前圖表區間）
- 在「追問 AI」輸入自訂問題，例如：  
  `請分析 2024 年整體估值變化與主要風險`

AI 分析會結合：
- 時間區間（3mo / 6mo / 1y）
- 估值與動能指標  

輸出結構化報告：
- 估值判斷（偏高 / 偏低 / 合理）
- 近期股價動能
- 主要亮點（2–4 點）
- 風險與需關注事項（2–4 點）
- 投資人提醒（非投資建議）

📌 若未設定 `GOOGLE_API_KEY`，系統會自動切換為規則版分析（非 LLM）。

---

### 5️⃣ 📊 財報亮點 / 風險 / 展望

資料來源：
- Yahoo Finance
- Earnings table（若有）
- Income Statement Quarterly  

由 Gemini 整理：
- 財報亮點
- 潛在風險
- 管理階層關注重點
- 投資人提醒（非建議）

📌 無 LLM 或資料不足時，系統會顯示規則版說明，不會產生虛構內容。

---

### 6️⃣ 📄 文字檔上傳 × AI 翻譯 / 摘要

支援：
- `.txt`
- `.md`
- `.pdf`（pdfplumber）

或直接貼上文字（新聞 / 財報 / 法說會逐字稿）

處理流程：
1. 檢查是否與目前股票相關（ticker / 公司名稱）
2. 通過後：
   - 英文 → 繁體中文翻譯
   - AI 摘要：
     - 主題
     - 亮點
     - 風險
     - 展望
     - 投資人提醒

---

## 🧠 AI 模型選擇（Google Gemini）

- **Gemini 2.0 Flash**
  - 反應快速
  - 適合即時互動與追問

- **Gemini 1.5 Pro**
  - 推理與摘要能力較強
  - 適合長文本與深度分析

📌 兩者共用同一組 `GOOGLE_API_KEY`。

---

## 🏗 專案結構

```text
├── app.py                 # Streamlit 主入口
├── core
│   ├── data_fetch.py      # 股價與財報資料抓取
│   ├── indicators.py      # 估值與動能指標
│   └── ai_analyzer.py     # Gemini AI 分析 / 翻譯 / 摘要
├── requirements.txt
└── README.md


## 💡 使用流程（快速上手）

1. 輸入股票代號（例如 `AAPL`）

2. 選擇資料區間  
   - 3mo  
   - 6mo  
   - 1y  

3. 在側邊欄選擇 Gemini 模型  
   - Gemini 2.0 Flash  
   - Gemini 1.5 Pro  

4. 點擊「開始分析」

5. 瀏覽分析結果：
   - 即時價格、均線與成交量  
   - K 線圖與畫線工具  
   - 指標摘要卡片  
   - AI 數據分析報告  
   - 財報亮點 / 風險 / 展望  

6. 進階使用：
   - 在「追問 AI」中輸入自訂問題  
     例如：請比較最近三個季度的獲利穩定度
   - 上傳新聞或財報文字檔  
     系統會自動進行翻譯與重點摘要
